<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLM Code Analyzer | AI-Powered Code Analysis</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/dracula.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #4e73df;
            --secondary-color: #224abe;
            --accent-color: #f8f9fc;
            --text-color: #5a5c69;
            --light-gray: #f8f9fc;
            --dark-color: #2e3361;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: var(--text-color);
            background-color: #f8f9fc;
            min-height: 100vh;
        }
        
        .navbar {
            background-color: #fff;
            box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15);
        }
        
        .navbar-brand {
            font-weight: 700;
            color: var(--dark-color);
        }
        
        .navbar-brand span {
            color: var(--primary-color);
        }
        
        .hero-section {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 5rem 0;
            position: relative;
            overflow: hidden;
        }
        
        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('https://assets.website-files.com/5e51c674258ffe10d286d30a/5e5357dc6eabf133a75013be_petern-dark.svg');
            opacity: 0.1;
        }
        
        .hero-title {
            font-weight: 700;
            font-size: 3rem;
            margin-bottom: 1.5rem;
        }
        
        .hero-subtitle {
            font-size: 1.25rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }
        
        .feature-card {
            background: white;
            border-radius: 0.5rem;
            box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            height: 100%;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0.5rem 2rem 0 rgba(58, 59, 69, 0.15);
        }
        
        .feature-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: var(--light-gray);
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
        }
        
        .CodeMirror {
            height: 350px;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .analysis-card {
            border: none;
            box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.1);
            border-radius: 0.5rem;
            height: 100%;
        }
        
        .analysis-card .card-header {
            background-color: white;
            border-bottom: 1px solid rgba(0,0,0,.05);
            padding: 1rem 1.5rem;
        }
        
        .result-panel {
            height: 350px;
            overflow-y: auto;
        }
        
        .model-badge {
            font-size: 0.8rem;
            padding: 0.25rem 0.5rem;
            margin-left: 0.5rem;
        }
        
        .quality-score {
            font-size: 3rem;
            font-weight: bold;
        }
        
        .spinner-border {
            width: 3rem;
            height: 3rem;
        }
        
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .api-key-warning {
            background-color: #fff3cd;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 0.5rem;
            border-left: 5px solid #ffc107;
        }
        
        .demo-section {
            background-color: white;
            padding: 4rem 0;
        }

        .testimonial-card {
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.1);
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .testimonial-quote {
            font-size: 1.1rem;
            font-style: italic;
            color: #666;
            margin-bottom: 1rem;
        }

        .testimonial-author {
            font-weight: bold;
            font-size: 1rem;
        }

        .testimonial-role {
            font-size: 0.9rem;
            color: #888;
        }

        footer {
            background-color: var(--dark-color);
            color: white;
            padding: 3rem 0;
        }

        .footer-link {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-link:hover {
            color: white;
        }

        .social-links a {
            display: inline-flex;
            justify-content: center;
            align-items: center;
            width: 38px;
            height: 38px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
            margin-right: 0.5rem;
            transition: background-color 0.3s;
        }

        .social-links a:hover {
            background-color: var(--primary-color);
        }

        .tab-pane {
            padding: 1.5rem;
        }

        .code-examples {
            margin-top: 3rem;
        }

        .code-examples .nav-link {
            color: var(--text-color);
            border-radius: 0;
            padding: 0.75rem 1.5rem;
            font-weight: 500;
        }

        .code-examples .nav-link.active {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }

        .btn-primary:hover, .btn-primary:focus {
            background-color: var(--secondary-color);
            border-color: var(--secondary-color);
        }

        .btn-outline-light:hover {
            color: var(--primary-color);
            background-color: white;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light">
        <div class="container">
            <a class="navbar-brand" href="#"><i class="fas fa-code-branch me-2"></i>LLM <span>Code Analyzer</span></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#features">Features</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#demo">Demo</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#how-it-works">How It Works</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://github.com/arun3676/llm-code-analyzer" target="_blank">GitHub</a>
                    </li>
                    <li class="nav-item">
                        <a class="btn btn-primary ms-2" href="#demo">Try It Now</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section text-center">
        <div class="container position-relative">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <h1 class="hero-title">AI-Powered Code Analysis</h1>
                    <p class="hero-subtitle">Leverage multiple LLMs to analyze your code, identify bugs, suggest improvements, and generate documentation automatically.</p>
                    <div>
                        <a href="#demo" class="btn btn-light btn-lg me-2">Try Demo</a>
                        <a href="https://github.com/arun3676/llm-code-analyzer" target="_blank" class="btn btn-outline-light btn-lg">View on GitHub</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="py-5" id="features">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="fw-bold">Key Features</h2>
                <p class="text-muted">Why choose our LLM Code Analyzer for your projects</p>
            </div>
            <div class="row g-4">
                <div class="col-md-4">
                    <div class="feature-card p-4">
                        <div class="feature-icon">
                            <i class="fas fa-robot"></i>
                        </div>
                        <h4>Multi-LLM Integration</h4>
                        <p>Combines insights from both GPT and Claude models for more comprehensive analysis and higher-quality results.</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="feature-card p-4">
                        <div class="feature-icon">
                            <i class="fas fa-bug"></i>
                        </div>
                        <h4>Bug Detection</h4>
                        <p>Identifies potential bugs, edge cases, and logical errors that might be missed during manual code reviews.</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="feature-card p-4">
                        <div class="feature-icon">
                            <i class="fas fa-wrench"></i>
                        </div>
                        <h4>Code Improvement</h4>
                        <p>Suggests optimizations for performance, readability, and maintainability based on best practices.</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="feature-card p-4">
                        <div class="feature-icon">
                            <i class="fas fa-file-code"></i>
                        </div>
                        <h4>Automatic Documentation</h4>
                        <p>Generates comprehensive documentation for your code, saving hours of manual documentation work.</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="feature-card p-4">
                        <div class="feature-icon">
                            <i class="fas fa-tachometer-alt"></i>
                        </div>
                        <h4>Quality Metrics</h4>
                        <p>Provides numerical quality scores to objectively measure and track your code quality over time.</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="feature-card p-4">
                        <div class="feature-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <h4>Model Comparison</h4>
                        <p>Compare performance across different LLMs to identify which model performs best for your specific code type.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Demo Section -->
    <section class="demo-section" id="demo">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="fw-bold">Try It Yourself</h2>
                <p class="text-muted">Paste your code and see the analyzer in action</p>
            </div>

            <!-- API Key Warning -->
            <div id="apiKeyWarning" class="api-key-warning d-none">
                <h4>⚠️ API Key Configuration Required</h4>
                <p>We couldn't find the necessary API keys in your environment. To use the Code Analyzer, please:</p>
                <ol>
                    <li>Create a <code>.env</code> file in your project root directory</li>
                    <li>Add your API keys to the file:</li>
                </ol>
                <pre><code>OPENAI_API_KEY=your_actual_openai_api_key_here
ANTHROPIC_API_KEY=your_actual_anthropic_api_key_here</code></pre>
                <p>After adding your API keys, restart the application.</p>
            </div>

            <div class="row">
                <div class="col-lg-12 mb-4">
                    <div class="card analysis-card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Code Input</h5>
                            <div>
                                <div id="modelCheckboxes">
                                    <!-- Model checkboxes will be added dynamically -->
                                </div>
                                <button id="analyzeBtn" class="btn btn-primary ms-2">Analyze Code</button>
                            </div>
                        </div>
                        <div class="card-body">
                            <textarea id="codeEditor"></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Results Section -->
            <div id="resultsSection" class="row d-none">
                <div class="col-lg-12 mb-4">
                    <div class="card analysis-card">
                        <div class="card-header">
                            <ul class="nav nav-tabs card-header-tabs" id="resultTabs" role="tablist">
                                <!-- Tabs will be added dynamically -->
                            </ul>
                        </div>
                        <div class="card-body">
                            <div class="tab-content" id="resultTabContent">
                                <!-- Tab panes will be added dynamically -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Model Comparison Section -->
            <div id="comparisonSection" class="row d-none">
                <div class="col-lg-12">
                    <div class="card analysis-card">
                        <div class="card-header">
                            <h5 class="mb-0">Model Comparison</h5>
                        </div>
                        <div class="card-body">
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th>Model</th>
                                        <th>Average Quality Score</th>
                                        <th>Average Execution Time</th>
                                        <th>Success Rate</th>
                                    </tr>
                                </thead>
                                <tbody id="comparisonTable">
                                    <!-- Comparison data will be added dynamically -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Loading overlay -->
            <div id="loadingOverlay" class="loading-overlay d-none">
                <div class="text-center text-white">
                    <div class="spinner-border" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <div class="mt-2">Analyzing Code...</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Code Example Section -->
    <section class="py-5 bg-light" id="code-examples">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="fw-bold">Code Examples</h2>
                <p class="text-muted">Try these examples to see the analyzer in action</p>
            </div>
            
            <div class="code-examples">
                <ul class="nav nav-tabs mb-4" id="exampleTabs">
                    <li class="nav-item">
                        <a class="nav-link active" id="python-tab" data-bs-toggle="tab" href="#python">Python</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="javascript-tab" data-bs-toggle="tab" href="#javascript">JavaScript</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="java-tab" data-bs-toggle="tab" href="#java">Java</a>
                    </li>
                </ul>
                
                <div class="tab-content">
                    <div class="tab-pane fade show active" id="python">
                        <div class="card">
                            <div class="card-body">
                                <pre><code class="language-python">def fibonacci(n):
    if n <= 0:
        return []
    elif n == 1:
        return [0]
    
    sequence = [0, 1]
    while len(sequence) < n:
        sequence.append(sequence[-1] + sequence[-2])
    return sequence

def calculate_average(numbers):
    total = 0
    for num in numbers:
        total += num
    return total / len(numbers)  # Potential bug: division by zero if numbers is empty

def find_max(numbers):
    if not numbers:
        return None
    max_value = numbers[0]
    for number in numbers:
        if number > max_value:
            max_value = number
    return max_value</code></pre>
                                <button class="btn btn-primary mt-3" onclick="useExample('python')">Use This Example</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-pane fade" id="javascript">
                        <div class="card">
                            <div class="card-body">
                                <pre><code class="language-javascript">function calculateTotal(items) {
  let total = 0;
  
  for (let i = 0; i < items.length; i++) {
    total += items[i].price * items[i].quantity;
  }
  
  return total;
}

function findDuplicates(array) {
  const duplicates = [];
  const seen = {};
  
  for (let i = 0; i < array.length; i++) {
    if (seen[array[i]]) {
      if (seen[array[i]] === 1) {
        duplicates.push(array[i]);
      }
      seen[array[i]]++;
    } else {
      seen[array[i]] = 1;
    }
  }
  
  return duplicates;
}

function fetchUserData(userId, callback) {
  // Potential issue: no error handling
  fetch(`https://api.example.com/users/${userId}`)
    .then(response => response.json())
    .then(data => callback(data));
}</code></pre>
                                <button class="btn btn-primary mt-3" onclick="useExample('javascript')">Use This Example</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-pane fade" id="java">
                        <div class="card">
                            <div class="card-body">
                                <pre><code class="language-java">import java.util.ArrayList;
import java.util.List;

public class UserManager {
    private List<User> users;
    
    public UserManager() {
        this.users = new ArrayList<>();
    }
    
    public void addUser(User user) {
        // Potential issue: no validation if user is null
        users.add(user);
    }
    
    public User findUserById(int id) {
        for (User user : users) {
            if (user.getId() == id) {
                return user;
            }
        }
        return null;  // Potential issue: returning null instead of Optional
    }
    
    public boolean removeUser(int id) {
        User userToRemove = findUserById(id);
        if (userToRemove != null) {
            return users.remove(userToRemove);
        }
        return false;
    }
}</code></pre>
                                <button class="btn btn-primary mt-3" onclick="useExample('java')">Use This Example</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- How It Works Section -->
    <section class="py-5" id="how-it-works">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="fw-bold">How It Works</h2>
                <p class="text-muted">The technology behind our code analyzer</p>
            </div>
            
            <div class="row g-4">
                <div class="col-lg-3 col-md-6">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body text-center p-4">
                            <div class="mb-3">
                                <span class="badge bg-primary rounded-circle p-3" style="width: 48px; height: 48px;">1</span>
                            </div>
                            <h5>Code Input</h5>
                            <p class="text-muted">You provide your code through our intuitive web interface or API.</p>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-3 col-md-6">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body text-center p-4">
                            <div class="mb-3">
                                <span class="badge bg-primary rounded-circle p-3" style="width: 48px; height: 48px;">2</span>
                            </div>
                            <h5>Multi-LLM Processing</h5>
                            <p class="text-muted">Your code is analyzed by multiple LLMs (Claude and GPT) in parallel.</p>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-3 col-md-6">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body text-center p-4">
                            <div class="mb-3">
                                <span class="badge bg-primary rounded-circle p-3" style="width: 48px; height: 48px;">3</span>
                            </div>
                            <h5>Insight Generation</h5>
                            <p class="text-muted">The system generates quality scores, identifies bugs, and suggests improvements.</p>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-3 col-md-6">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body text-center p-4">
                            <div class="mb-3">
                                <span class="badge bg-primary rounded-circle p-3" style="width: 48px; height: 48px;">4</span>
                            </div>
                            <h5>Comprehensive Results</h5>
                            <p class="text-muted">You receive detailed analysis results with actionable recommendations.</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="text-center mt-5">
                <p class="mb-4">The analyzer uses advanced prompt engineering techniques to extract structured information from LLMs, ensuring high-quality and consistent results.</p>
                <a href="https://github.com/arun3676/llm-code-analyzer" target="_blank" class="btn btn-primary">View Technical Details on GitHub</a>
            </div>
        </div>
    </section>

    <!-- Testimonials Section -->
    <section class="py-5 bg-light">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="fw-bold">What Users Say</h2>
                <p class="text-muted">Testimonials from developers using our tool</p>
            </div>
            
            <div class="row">
                <div class="col-md-4">
                    <div class="testimonial-card">
                        <p class="testimonial-quote">"This tool has transformed our code review process. It catches issues we would have missed and saves hours of manual documentation work."</p>
                        <div class="testimonial-author">Sarah Chen</div>
                        <div class="testimonial-role">Senior Software Engineer</div>
                    </div>
                </div>
                
                <div class="col-md-4">
                    <div class="testimonial-card">
                        <p class="testimonial-quote">"The multi-model approach gives more comprehensive insights than any single AI tool I've used. It's now part of our CI/CD pipeline."</p>
                        <div class="testimonial-author">Michael Rodriguez</div>
                        <div class="testimonial-role">DevOps Lead</div>
                    </div>
                </div>
                
                <div class="col-md-4">
                    <div class="testimonial-card">
                        <p class="testimonial-quote">"As someone learning to code, this tool has been invaluable. It not only identifies issues but explains why they're problematic and how to fix them."</p>
                        <div class="testimonial-author">Jamie Taylor</div>
                        <div class="testimonial-role">Computer Science Student</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4 mb-lg-0">
                    <h5 class="text-white mb-4">LLM Code Analyzer</h5>
                    <p class="mb-4">An AI-powered tool that helps developers write better code through automated analysis, bug detection, and documentation.</p>
                    <div class="social-links">
                        <a href="https://github.com/arun3676/llm-code-analyzer" target="_blank"><i class="fab fa-github"></i></a>
                        <a href="https://linkedin.com/in/" target="_blank"><i class="fab fa-linkedin-in"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                    </div>
                </div>
                
                <div class="col-lg-2 col-md-4 mb-4 mb-md-0">
                    <h5 class="text-white mb-4">Links</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="#features" class="footer-link">Features</a></li>
                        <li class="mb-2"><a href="#demo" class="footer-link">Try Demo</a></li>
                        <li class="mb-2"><a href="#how-it-works" class="footer-link">How It Works</a></li>
                        <li class="mb-2"><a href="https://github.com/arun3676/llm-code-analyzer" target="_blank" class="footer-link">GitHub</a></li>
                    </ul>
                </div>
                
                <div class="col-lg-3 col-md-4 mb-4 mb-md-0">
                    <h5 class="text-white mb-4">Resources</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="https://github.com/arun3676/llm-code-analyzer/blob/main/README.md" target="_blank" class="footer-link">Documentation</a></li>
                        <li class="mb-2"><a href="https://github.com/arun3676/llm-code-analyzer/issues" target="_blank" class="footer-link">Report Issues</a></li>
                        <li class="mb-2"><a href="https://github.com/arun3676/llm-code-analyzer/blob/main/LICENSE" target="_blank" class="footer-link">License</a></li>
                        <li class="mb-2"><a href="#" class="footer-link">API Reference</a></li>
                    </ul>
                </div>
                
                <div class="col-lg-3 col-md-4">
                    <h5 class="text-white mb-4">Contact</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><i class="fas fa-envelope me-2"></i><a href="mailto:arunkiran721@gmail.com" class="footer-link">arunkiran721@gmail.com</a></li>
                        <li class="mb-2"><i class="fab fa-github me-2"></i><a href="https://github.com/arun3676" target="_blank" class="footer-link">github.com/arun3676</a></li>
                    </ul>
                </div>
            </div>
            
            <hr class="mt-4 mb-4" style="border-color: rgba(255,255,255,0.1);">
            
            <div class="text-center">
                <p class="mb-0">© 2025 LLM Code Analyzer. Created by Arun Kumar Chukkala.</p>
            </div>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/python/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/clike/clike.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.0.2/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script>
        // Initialize CodeMirror
        const codeEditor = CodeMirror.fromTextArea(document.getElementById('codeEditor'), {
            lineNumbers: true,
            mode: 'python',
            theme: 'dracula',
            indentUnit: 4,
            smartIndent: true,
            tabSize: 4,
            indentWithTabs: false,
            lineWrapping: true
        });

        // Sample code for demonstration
        codeEditor.setValue(`def fibonacci(n):
    if n <= 0:
        return []
    elif n == 1:
        return [0]
    
    sequence = [0, 1]
    while len(sequence) < n:
        sequence.append(sequence[-1] + sequence[-2])
    return sequence`);

        // Check available models
        async function checkAvailableModels() {
            try {
                const response = await fetch('/models');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const models = await response.json();
                if (models.length === 0) {
                    // Show API key warning
                    document.getElementById('apiKeyWarning').classList.remove('d-none');
                    document.getElementById('analyzeBtn').disabled = true;
                    return [];
                }
                
                return models;
            } catch (error) {
                console.error('Error checking available models:', error);
                document.getElementById('apiKeyWarning').classList.remove('d-none');
                document.getElementById('analyzeBtn').disabled = true;
                return [];
            }
        }

        // Set up model checkboxes
        async function setupModelCheckboxes() {
            const models = await checkAvailableModels();
            const checkboxContainer = document.getElementById('modelCheckboxes');
            
            if (models.length === 0) {
                checkboxContainer.innerHTML = '<div class="form-check form-check-inline"><span class="text-danger">No models available</span></div>';
                return;
            }
            
            models.forEach(model => {
                const checkboxDiv = document.createElement('div');
                checkboxDiv.className = 'form-check form-check-inline';
                
                const checkbox = document.createElement('input');
                checkbox.className = 'form-check-input';
                checkbox.type = 'checkbox';
                checkbox.id = `${model}Model`;
                checkbox.value = model;
                checkbox.checked = true;
                
                const label = document.createElement('label');
                label.className = 'form-check-label';
                label.htmlFor = `${model}Model`;
                label.textContent = model.toUpperCase();
                
                checkboxDiv.appendChild(checkbox);
                checkboxDiv.appendChild(label);
                checkboxContainer.appendChild(checkboxDiv);
            });
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', () => {
            setupModelCheckboxes();
            // Initialize code highlighting for examples
            document.querySelectorAll('pre code').forEach((block) => {
                hljs.highlightElement(block);
            });
        });

        // Use example code
        function useExample(language) {
            const codeBlock = document.querySelector(`#${language} pre code`).textContent;
            codeEditor.setValue(codeBlock);
            
            // Set the appropriate mode for the CodeMirror editor
            if (language === 'javascript') {
                codeEditor.setOption('mode', 'javascript');
            } else if (language === 'java') {
                codeEditor.setOption('mode', 'text/x-java');
            } else {
                codeEditor.setOption('mode', 'python');
            }
            
            // Scroll to the demo section
            document.getElementById('demo').scrollIntoView({ behavior: 'smooth' });
        }

        // Analyze button click handler
        document.getElementById('analyzeBtn').addEventListener('click', async () => {
            const code = codeEditor.getValue();
            if (!code.trim()) {
                alert('Please enter some code to analyze.');
                return;
            }

            // Get all checkboxes
            const checkboxes = document.querySelectorAll('#modelCheckboxes input[type="checkbox"]');
            
            // Get selected models
            const selectedModels = [];
            checkboxes.forEach(checkbox => {
                if (checkbox.checked) selectedModels.push(checkbox.value);
            });

            if (selectedModels.length === 0) {
                alert('Please select at least one model for analysis.');
                return;
            }

            // Show loading overlay
            document.getElementById('loadingOverlay').classList.remove('d-none');

            try {
                // Call the API to analyze the code
                const response = await fetch('/analyze', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        code: code,
                        models: selectedModels
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const results = await response.json();

                // Display results
                displayResults(results);

                // Get and display model comparison
                await fetchAndDisplayComparison();

            } catch (error) {
                console.error('Error analyzing code:', error);
                alert('An error occurred during analysis. Please try again.');
            } finally {
                // Hide loading overlay
                document.getElementById('loadingOverlay').classList.add('d-none');
            }
        });

        function displayResults(results) {
            const resultTabs = document.getElementById('resultTabs');
            const resultTabContent = document.getElementById('resultTabContent');

            // Clear previous results
            resultTabs.innerHTML = '';
            resultTabContent.innerHTML = '';

            // Create tabs and content for each model
            Object.keys(results).forEach((model, index) => {
                const isActive = index === 0;
                const modelResult = results[model];
                const modelId = `${model}-result`;

                // Create tab
                const tabItem = document.createElement('li');
                tabItem.className = 'nav-item';
                tabItem.innerHTML = `
                    <a class="nav-link ${isActive ? 'active' : ''}" id="${modelId}-tab" 
                       data-bs-toggle="tab" href="#${modelId}" role="tab" 
                       aria-controls="${modelId}" aria-selected="${isActive}">
                        ${model.toUpperCase()}
                        <span class="badge ${getModelBadgeClass(model)} model-badge">Model</span>
                    </a>
                `;
                resultTabs.appendChild(tabItem);

                // Create tab content
                const tabContent = document.createElement('div');
                tabContent.className = `tab-pane fade ${isActive ? 'show active' : ''}`;
                tabContent.id = modelId;
                tabContent.setAttribute('role', 'tabpanel');
                tabContent.setAttribute('aria-labelledby', `${modelId}-tab`);

                if (modelResult.error) {
                    tabContent.innerHTML = `<div class="alert alert-danger">${modelResult.error}</div>`;
                } else {
                    tabContent.innerHTML = `
                        <div class="row">
                            <div class="col-md-4 mb-4">
                                <div class="card h-100">
                                    <div class="card-header">Quality Score</div>
                                    <div class="card-body text-center">
                                        <div class="quality-score" style="color: ${getScoreColor(modelResult.quality_score)}">
                                            ${modelResult.quality_score.toFixed(1)}
                                        </div>
                                        <div class="text-muted">out of 100</div>
                                        <div class="mt-3">
                                            <small class="text-muted">
                                                Analysis Time: ${modelResult.execution_time.toFixed(2)}s
                                            </small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-8 mb-4">
                                <div class="card h-100">
                                    <div class="card-header">Potential Bugs</div>
                                    <div class="card-body result-panel">
                                        <ul class="list-group list-group-flush">
                                            ${modelResult.potential_bugs.length ? 
                                                modelResult.potential_bugs.map(bug => 
                                                    `<li class="list-group-item">${bug}</li>`
                                                ).join('') : 
                                                '<li class="list-group-item text-success">No issues detected</li>'
                                            }
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-4">
                                <div class="card h-100">
                                    <div class="card-header">Improvement Suggestions</div>
                                    <div class="card-body result-panel">
                                        <ul class="list-group list-group-flush">
                                            ${modelResult.improvement_suggestions.length ? 
                                                modelResult.improvement_suggestions.map(suggestion => 
                                                    `<li class="list-group-item">${suggestion}</li>`
                                                ).join('') : 
                                                '<li class="list-group-item text-muted">No suggestions</li>'
                                            }
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 mb-4">
                                <div class="card h-100">
                                    <div class="card-header">Documentation</div>
                                    <div class="card-body result-panel markdown-content">
                                        ${marked.parse(modelResult.documentation)}
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                }

                resultTabContent.appendChild(tabContent);
            });

            // Show results section
            document.getElementById('resultsSection').classList.remove('d-none');
        }

        async function fetchAndDisplayComparison() {
            try {
                const response = await fetch('/comparison');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const comparison = await response.json();
                
                // Check if we have comparison data
                if (Object.keys(comparison).length === 0) {
                    return; // No data to display
                }

                const tableBody = document.getElementById('comparisonTable');
                tableBody.innerHTML = '';

                Object.keys(comparison).forEach(model => {
                    const data = comparison[model];
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>
                            ${model.toUpperCase()}
                            <span class="badge ${getModelBadgeClass(model)} model-badge">Model</span>
                        </td>
                        <td style="color: ${getScoreColor(data.average_quality_score)}">
                            ${data.average_quality_score.toFixed(2)}
                        </td>
                        <td>${data.average_execution_time.toFixed(2)}s</td>
                        <td>${(data.success_rate * 100).toFixed(1)}%</td>
                    `;
                    tableBody.appendChild(row);
                });

                // Show comparison section
                document.getElementById('comparisonSection').classList.remove('d-none');
            } catch (error) {
                console.error('Error fetching comparison:', error);
            }
        }

        function getScoreColor(score) {
            if (score >= 80) return '#28a745'; // Green
            if (score >= 60) return '#ffc107'; // Yellow
            return '#dc3545'; // Red
        }

        function getModelBadgeClass(model) {
            switch (model.toLowerCase()) {
                case 'gpt': return 'bg-success';
                case 'claude': return 'bg-primary';
                default: return 'bg-secondary';
            }
        }
    </script>
</body>
</html>
